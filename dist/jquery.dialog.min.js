/*
* jqDialog - jQuery plugin for rendering dialog
*
* Version: 0.0.1a
* Copyright 2011 Alex Tkachev
*
* Dual licensed under MIT or GPLv2 licenses
*   http://en.wikipedia.org/wiki/MIT_License
*   http://en.wikipedia.org/wiki/GNU_General_Public_License
*
* Date: Wed Jul 20 15:47:16 2011 +0300
*/
(function(a){var b=function(){this.initialize.apply(this,arguments)};a.extend(b.prototype,{initialize:function(){},show:function(b){this.options=b,this.el||(this.el=this._createUI()),a("div.content",this.el).html(b.type(this)),this.el.show();var c=a("div.tip",this.el),d=b.position.my.indexOf("bottom")>=0;c.toggleClass("above",d).toggleClass("below",!d);var e=b.position.at.indexOf("right")>=0;b.position.offset="0 "+(d?-c.height():c.height()),this.el.position(b.position),c.position({my:b.position.at,at:b.position.my,of:a("div.content",this.el),offset:(e?-c.width():c.width())+" 0"}),a(document).bind("mousedown",{dialog:this},this._onDocumntMouseDown),this._invokeCallback("show")},hide:function(){a(document).unbind("mousedown",this._onDocumntMouseDown),this.el.hide(),this._invokeCallback("hide")},_createUI:function(){return a('<div class="dialog-container"><div class="tip"/><div class="content"/></div>').appendTo("body").hide()},_invokeCallback:function(b){var c=this.options.events[b];a.isFunction(c)&&c.apply(this.options.events.context||c)},_onDocumntMouseDown:function(b){var c=a(b.target);c.closest("div.dialog-container").length===0&&b.data.dialog.hide()}});var c=new b;a.dialog={},a.dialog.i18n=a.i18n(),a.dialog.defaults={type:"simple",content:"",position:{my:"left top",at:"left bottom"},events:{}},a.dialog.types={simple:function(a){return a.options.content},confirm:function(){function b(b){var c=a('<div class="confirmation-dialog-content"><div class="message"/><div class="toolbar"><a href="javascript:;" class="yes"/><a href="javascript:;" class="no"/></div></div>');a("a.yes",c).html(b.yes.text||a.dialog.i18n.t("confirm.yes")).addClass(b.yes.cls),a("a.no",c).html(b.no.text||a.dialog.i18n.t("confirm.no")).addClass(b.no.cls),a("div.message",c).html(b.message||a.dialog.i18n.t("confirm.message"));return c}var c=function(c){var d=c.options,e=b(d.content);a("a.no",e).click(function(){a.dialog.hide(),c._invokeCallback("no")}),a("a.yes",e).click(function(){a.dialog.hide(),c._invokeCallback("yes")});return e};c.defaults={content:{yes:{cls:"button"},no:{cls:"button"}}};return c}()},a.extend(a.dialog,{show:function(b){b=a.extend({type:a.dialog.defaults.type},b||{});var d=b.type=a.dialog.types[b.type];if(!a.isFunction(d))throw"unknown dialog type "+b.type;a.isFunction(d.defaults)&&(d.defaults=d.defaults()),b=a.extend(!0,{},a.dialog.defaults,d.defaults||{},b),c.show(b)},hide:function(){c.hide()}})})(jQuery)